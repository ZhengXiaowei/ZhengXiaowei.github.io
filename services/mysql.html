<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>向mysql低头 | Xiao Blog</title>
    <meta name="description" content="">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/31.styles.72922159.css" as="style"><link rel="preload" href="/assets/js/app.a03d4e4f.js" as="script"><link rel="preload" href="/assets/js/12.6f950838.js" as="script"><link rel="prefetch" href="/assets/js/0.0f59b883.js"><link rel="prefetch" href="/assets/js/1.9796cf5f.js"><link rel="prefetch" href="/assets/js/2.2a946d02.js"><link rel="prefetch" href="/assets/js/3.59a83de8.js"><link rel="prefetch" href="/assets/js/4.21fdbdec.js"><link rel="prefetch" href="/assets/js/5.a09ec324.js"><link rel="prefetch" href="/assets/js/6.d6543f82.js"><link rel="prefetch" href="/assets/js/7.3de0ccee.js"><link rel="prefetch" href="/assets/js/8.88711e9b.js"><link rel="prefetch" href="/assets/js/9.338fb1f3.js"><link rel="prefetch" href="/assets/js/10.538a23d4.js"><link rel="prefetch" href="/assets/js/11.55badfb5.js"><link rel="prefetch" href="/assets/js/13.5399a19b.js"><link rel="prefetch" href="/assets/js/14.451eca1f.js"><link rel="prefetch" href="/assets/js/15.35ff6acf.js"><link rel="prefetch" href="/assets/js/16.ece38f4c.js"><link rel="prefetch" href="/assets/js/17.3bcb6de9.js"><link rel="prefetch" href="/assets/js/18.74c09d5d.js"><link rel="prefetch" href="/assets/js/19.aa302882.js"><link rel="prefetch" href="/assets/js/20.d26e17c2.js"><link rel="prefetch" href="/assets/js/21.140f1446.js"><link rel="prefetch" href="/assets/js/22.d56b6200.js"><link rel="prefetch" href="/assets/js/23.c0b205ad.js"><link rel="prefetch" href="/assets/js/24.e3ca6758.js"><link rel="prefetch" href="/assets/js/25.5bbdea6c.js"><link rel="prefetch" href="/assets/js/26.15fba687.js"><link rel="prefetch" href="/assets/js/27.36d4982c.js"><link rel="prefetch" href="/assets/js/28.ef10919f.js"><link rel="prefetch" href="/assets/js/29.1fd2d94f.js"><link rel="prefetch" href="/assets/js/30.152778aa.js">
    <link rel="stylesheet" href="/assets/css/31.styles.72922159.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Xiao Blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>JavaScript</span><!----></p><ul class="sidebar-group-items"><li><a href="/javascript/" class="sidebar-link">前端缓存</a></li><li><a href="/javascript/partner.html" class="sidebar-link">设计模式</a></li><li><a href="/javascript/canvas.html" class="sidebar-link">canvas踩坑记</a></li><li><a href="/javascript/listview.html" class="sidebar-link">List-view 实现</a></li><li><a href="/javascript/typescript.html" class="sidebar-link">Typescript</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Vue</span><!----></p><ul class="sidebar-group-items"><li><a href="/vue/" class="sidebar-link">Vuex学习笔记</a></li><li><a href="/vue/vuex-persistence.html" class="sidebar-link">Vuex 持久化方案一</a></li><li><a href="/vue/vueMultipage.html" class="sidebar-link">vue多页配置</a></li><li><a href="/vue/optimize.html" class="sidebar-link">vue项目优化</a></li><li><a href="/vue/parcel-vue.html" class="sidebar-link">parcel-vue初体验</a></li><li><a href="/vue/sync-component.html" class="sidebar-link">异步组件</a></li><li><a href="/vue/rebuild.html" class="sidebar-link">重构Vue阅读器</a></li><li><a href="/vue/vue-tsx.html" class="sidebar-link">搭建vue-tsx风格的开发模板</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>WebApp</span><!----></p><ul class="sidebar-group-items"><li><a href="/webapp/" class="sidebar-link">cordova 打包</a></li><li><a href="/webapp/questions.html" class="sidebar-link">移动端问题锦集</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Flutter</span><!----></p><ul class="sidebar-group-items"><li><a href="/flutter/" class="sidebar-link">环境搭建</a></li><li><a href="/flutter/dart.html" class="sidebar-link">Dart基础语法</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Services</span><!----></p><ul class="sidebar-group-items"><li><a href="/services/" class="sidebar-link">Mongodb 好像有点意思？</a></li><li><a href="/services/mongodb.html" class="sidebar-link">正经学个mongoDB吧！</a></li><li><a href="/services/python.html" class="sidebar-link">学学Python吧~</a></li><li><a href="/services/mysql.html" class="active sidebar-link">向mysql低头</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/services/mysql.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/services/mysql.html#简单查询" class="sidebar-link">简单查询</a></li><li class="sidebar-sub-header"><a href="/services/mysql.html#多表查询" class="sidebar-link">多表查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/services/mysql.html#内连接" class="sidebar-link">内连接</a></li><li class="sidebar-sub-header"><a href="/services/mysql.html#左连接" class="sidebar-link">左连接</a></li><li class="sidebar-sub-header"><a href="/services/mysql.html#右连接" class="sidebar-link">右连接</a></li></ul></li><li class="sidebar-sub-header"><a href="/services/mysql.html#分组" class="sidebar-link">分组</a></li><li class="sidebar-sub-header"><a href="/services/mysql.html#索引" class="sidebar-link">索引</a></li><li class="sidebar-sub-header"><a href="/services/mysql.html#todo" class="sidebar-link">todo</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>其他</span><!----></p><ul class="sidebar-group-items"><li><a href="/others/" class="sidebar-link">VSCode 常用插件推荐</a></li><li><a href="/others/vsESlint.html" class="sidebar-link">VSCode ESLint 配置</a></li><li><a href="/others/nginx.html" class="sidebar-link">nginx服务器搭建</a></li><li><a href="/others/android-dev.html" class="sidebar-link">Mac 配置 Android 环境</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2><p>直接使用<code>brew</code>安装即可：</p><div class="language-bash extra-class"><pre class="language-bash"><code>brew <span class="token function">install</span> mysql
</code></pre></div><p>安装成功后，如果命令行是<code>bash</code>的话，使用<code>source ~/.bash_profile</code>重新执行下环境变量。如果使用的是<code>zsh</code>，那么使用<code>source ~/.zshrc</code>重新执行，让环境变量生效。</p><p><strong>Ps: 如果有在<code>.zshrc</code>文件中使用<code>srouce ~/.bash_profile</code>命令的话 就可以使用<code>source ~/.zshrc</code>，如果没有 则直接使用<code>source ~/.bash_profile</code>即可。</strong></p><p>安装成功后，可以使用以下命令启动或者关闭服务：</p><div class="language-bash extra-class"><pre class="language-bash"><code>mysql.server start <span class="token comment"># 启动服务</span>

mysql.server stop <span class="token comment"># 关闭服务</span>
</code></pre></div><p>启动成功后，使用命令<code>mysql -uroot</code>直接进入数据库，如果有设置密码的话，使用命令<code>mysql -uroot -p</code>，然后按提示输入密码即可。</p><div class="tip custom-block"><p class="custom-block-title">忘记密码</p><p>如果忘记密码或者要设置用户的登录密码，可以使用命令重置密码:</p><div class="language-bash extra-class"><pre class="language-bash"><code>alter user <span class="token string">'root'</span>@localhost IDENTIFIED mysql_native_password by <span class="token string">'你的新密码'</span>
</code></pre></div></div><p>可以使用<code>mysql</code>的<code>GUI</code>工具进行操作，比如<code>navicat mysql</code>或者官网提供的<code>mysql workbench</code>。</p><h2 id="简单查询"><a href="#简单查询" aria-hidden="true" class="header-anchor">#</a> 简单查询</h2><p>所谓的<code>CURD</code>就是我们平时所说的<strong>增(Creat)</strong>、<strong>删(Delete)</strong>、<strong>改(Update)</strong>、<strong>查(Read)</strong>。</p><p>先增加一张表：</p><div class="language-bash extra-class"><pre class="language-bash"><code>show databases<span class="token punctuation">;</span> <span class="token comment"># 显示当前所拥有的数据库</span>

use demo<span class="token punctuation">;</span> <span class="token comment"># 进入demo数据库</span>

<span class="token comment"># 创建一张book_categories表</span>
CREATE TABLE <span class="token variable"><span class="token variable">`</span>book_categories<span class="token variable">`</span></span> <span class="token punctuation">(</span>
  <span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span> int<span class="token punctuation">(</span>11<span class="token punctuation">)</span> unsigned NOT NULL AUTO_INCREMENT,
  <span class="token variable"><span class="token variable">`</span>category_name<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span>50<span class="token punctuation">)</span> DEFAULT NULL,
  <span class="token variable"><span class="token variable">`</span>created_at<span class="token variable">`</span></span> datetime DEFAULT NULL,
  <span class="token variable"><span class="token variable">`</span>updated_at<span class="token variable">`</span></span> datetime DEFAULT NULL,
  PRIMARY KEY <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> ENGINE<span class="token operator">=</span>InnoDB AUTO_INCREMENT<span class="token operator">=</span>39 DEFAULT CHARSET<span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre></div><p>常用的简单查询有：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> * from book_categories<span class="token punctuation">;</span> <span class="token comment"># 查询书籍分类表的所有数据</span>

<span class="token keyword">select</span> id, category_name from book_categories<span class="token punctuation">;</span> <span class="token comment"># 查询并列出表的id和caetgory_name字段</span>

<span class="token keyword">select</span> id, category_name from book_categories where <span class="token function">id</span> <span class="token operator">&gt;</span> 2<span class="token punctuation">;</span> <span class="token comment"># 查询表中id大于2的数据，并显示id和caetgory_name字段</span>

<span class="token keyword">select</span> id, category_name from book_categories where category_name like <span class="token string">'云%'</span><span class="token punctuation">;</span> <span class="token comment"># 查询表中分类名称以云开头的数据，同理，还有%云-以云结尾的，%云%-带有云字的。</span>

<span class="token keyword">select</span> id, category_name from book_categories order by <span class="token function">id</span> desc<span class="token punctuation">;</span> <span class="token comment"># 查询结果以id降序排列</span>

<span class="token keyword">select</span> * from book_categories having <span class="token function">id</span> <span class="token operator">&gt;</span> 3<span class="token punctuation">;</span> <span class="token comment"># 查询id大于3的所有数据</span>

<span class="token keyword">select</span> * from book_categories group by category_name<span class="token punctuation">;</span> <span class="token comment"># 以category_name对数据进行分组统计</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">having 和 where 的区别</p><ul><li><code>having</code>的判断是数据分组前，通常和<code>group by</code>一起。<code>where</code>的判断是数据读入内存的时候。</li><li><code>having</code>可以使用字段别名，而<code>where</code>不行。比如：</li></ul><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 使用having没问题，使用where会报name无法识别的错误。</span>
<span class="token keyword">select</span> id, category_name as name from book_categories having name <span class="token operator">=</span> <span class="token string">'xxx'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>having</code>可以使用统计函数，而<code>where</code>不行。比如：</li></ul><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> * from book_categories group by category_name having count<span class="token punctuation">(</span>*<span class="token punctuation">)</span> <span class="token operator">&gt;</span> 1<span class="token punctuation">;</span>
</code></pre></div></div><p>数据添加的语句：</p><div class="language-bash extra-class"><pre class="language-bash"><code>insert into book_categories <span class="token punctuation">(</span>category_name<span class="token punctuation">)</span> values<span class="token punctuation">(</span><span class="token string">'玄幻'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 增加一条记录 - 指定列名</span>
<span class="token comment"># 或者可以使用</span>
insert into book_categories values<span class="token punctuation">(</span>0,<span class="token string">'玄幻'</span>, <span class="token string">''</span>, <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">#第一个属性如果为id自增的时候，可以直接设置成0</span>
</code></pre></div><p>数据修改的语句：</p><div class="language-bash extra-class"><pre class="language-bash"><code>update book_categories <span class="token keyword">set</span> category_name<span class="token operator">=</span><span class="token string">'言情'</span> where <span class="token function">id</span> <span class="token operator">=</span> 1<span class="token punctuation">;</span> <span class="token comment"># 修改id为1的数据的分类名称为言情</span>
<span class="token comment"># 如果不指定条件 则更新该表中的所有数据</span>
update book_categories <span class="token keyword">set</span> category_name<span class="token operator">=</span><span class="token string">'言情'</span><span class="token punctuation">;</span> <span class="token comment"># 修改表中所有数据的分类名称为言情</span>
<span class="token comment"># 替换数据</span>
update book_categories <span class="token keyword">set</span> category_name <span class="token operator">=</span> replace<span class="token punctuation">(</span>category_name, <span class="token string">'言情'</span>, <span class="token string">'历史'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 批量修改表中所有分类名为言情的数据为历史， 如果指定修改 则加入where条件判断即可</span>
</code></pre></div><p>数据删除的语句:</p><div class="language-bash extra-class"><pre class="language-bash"><code>delete from book_categories<span class="token punctuation">;</span> <span class="token comment"># 删除分类表中的所有数据</span>

delete from book_categories where <span class="token function">id</span> <span class="token operator">=</span> 2<span class="token punctuation">;</span> <span class="token comment"># 删除id为2的数据</span>

truncate table book_categories<span class="token punctuation">;</span> <span class="token comment"># 删除分类表的所有数据</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">truncate 和 delete 的区别</p><p>两者都是删除表的所有数据，具体区别如下：</p><ul><li><code>delete</code>可以删除单条，指定<code>where</code>条件即可，且删除后可以回滚。<code>truncate</code>只能删除整表，且操作不可回滚。</li><li><code>delete</code>删除后再新增数据，自增 id 总是以总数据的长度+1 进行自增，而<code>truncate</code>从 1 开始。</li><li><code>delete</code>每次操作后都会有日志记录，而<code>truncate</code>不会。</li><li><code>truncate</code>的执行效率比<code>delete</code>高。</li></ul></div><h2 id="多表查询"><a href="#多表查询" aria-hidden="true" class="header-anchor">#</a> 多表查询</h2><p>先建立两张表：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># user 表</span>
CREATE TABLE <span class="token variable"><span class="token variable">`</span>user<span class="token variable">`</span></span> <span class="token punctuation">(</span>
  <span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span> int<span class="token punctuation">(</span>11<span class="token punctuation">)</span> unsigned NOT NULL AUTO_INCREMENT,
  <span class="token variable"><span class="token variable">`</span>name<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span>50<span class="token punctuation">)</span> DEFAULT NULL,
  <span class="token variable"><span class="token variable">`</span>age<span class="token variable">`</span></span> int<span class="token punctuation">(</span>3<span class="token punctuation">)</span> DEFAULT NULL,
  <span class="token variable"><span class="token variable">`</span>description<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span>255<span class="token punctuation">)</span> DEFAULT NULL,
  PRIMARY KEY <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> ENGINE<span class="token operator">=</span>InnoDB AUTO_INCREMENT<span class="token operator">=</span>39 DEFAULT CHARSET<span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token comment"># product 表</span>
CREATE TABLE <span class="token variable"><span class="token variable">`</span>product<span class="token variable">`</span></span> <span class="token punctuation">(</span>
  <span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span> int<span class="token punctuation">(</span>11<span class="token punctuation">)</span> unsigned NOT NULL AUTO_INCREMENT,
  <span class="token variable"><span class="token variable">`</span>product_name<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span>50<span class="token punctuation">)</span> DEFAULT NULL,
  <span class="token variable"><span class="token variable">`</span>nums<span class="token variable">`</span></span> int<span class="token punctuation">(</span>11<span class="token punctuation">)</span> DEFAULT NULL,
  <span class="token variable"><span class="token variable">`</span>owner<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span>50<span class="token punctuation">)</span> DEFAULT NULL,
  PRIMARY KEY <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> ENGINE<span class="token operator">=</span>InnoDB AUTO_INCREMENT<span class="token operator">=</span>39 DEFAULT CHARSET<span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre></div><p>并插入若干数据：</p><p><code>user</code> 表：</p><table><thead><tr><th>id</th><th>name</th><th>age</th><th>description</th></tr></thead><tbody><tr><td>1</td><td>张三</td><td>18</td><td>我是张三</td></tr><tr><td>2</td><td>李四</td><td>22</td><td>我是李四</td></tr><tr><td>3</td><td>小六</td><td>24</td><td>我是小六</td></tr><tr><td>4</td><td>王五</td><td>16</td><td>我是王五</td></tr><tr><td>5</td><td>小七</td><td>21</td><td>我是小七</td></tr></tbody></table><p><code>product</code> 表：</p><table><thead><tr><th>id</th><th>product_name</th><th>nums</th><th>owner</th></tr></thead><tbody><tr><td>1</td><td>苹果</td><td>23</td><td>张三</td></tr><tr><td>2</td><td>梨子</td><td>15</td><td>李四</td></tr><tr><td>3</td><td>葡萄</td><td>27</td><td>小八</td></tr></tbody></table><h3 id="内连接"><a href="#内连接" aria-hidden="true" class="header-anchor">#</a> 内连接</h3><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 检索有水果产品的用户</span>
<span class="token keyword">select</span> name, product_name, nums from user, product where user.name <span class="token operator">=</span> product.owner<span class="token punctuation">;</span>

<span class="token comment"># 或者使用内连接</span>
<span class="token keyword">select</span> a.name, b.product_name, b.nums from user as a <span class="token function">join</span> product as b on a.name <span class="token operator">=</span> b.product_name<span class="token punctuation">;</span>
</code></pre></div><p>得到结果为：</p><table><thead><tr><th>name</th><th>product_name</th><th>nums</th></tr></thead><tbody><tr><td>张三</td><td>苹果</td><td>23</td></tr><tr><td>李四</td><td>梨子</td><td>15</td></tr></tbody></table><p>会发现，得到的结果是两张表共有的数据，而非共有部分则会省略，所以<code>JOIN</code>(<code>INNER JOIN</code>)是获取两张表的<strong>交集</strong>，如下图：</p><img src="/assets/mysql/join.gif"><h3 id="左连接"><a href="#左连接" aria-hidden="true" class="header-anchor">#</a> 左连接</h3><p>先上<code>sql</code>：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 以左表为基准，获取用户的产品情况</span>
<span class="token keyword">select</span> a.name, b.product_name from user as a left <span class="token function">join</span> product as b on a.name <span class="token operator">=</span> b.product_owner<span class="token punctuation">;</span>
</code></pre></div><p>得到的结果为：</p><table><thead><tr><th>name</th><th>product_name</th></tr></thead><tbody><tr><td>张三</td><td>苹果</td></tr><tr><td>李四</td><td>梨子</td></tr><tr><td>小六</td><td>NULL</td></tr><tr><td>王五</td><td>NULL</td></tr><tr><td>小七</td><td>NULL</td></tr></tbody></table><p>会发现，左表的数据全部出来了，而右表就显示了<strong>与之相关</strong>的数据，没有的则显示为<code>NULL</code>，所以左连接，简单点说，就是以左表为基准(<code>left join</code>左边为左表)，获取右表与之相关的数据，可以用以下图来解释：</p><img src="/assets/mysql/leftjoin.gif"><h3 id="右连接"><a href="#右连接" aria-hidden="true" class="header-anchor">#</a> 右连接</h3><p>老规矩，先上<code>sql</code>，把<code>左连接</code>的<code>sql</code>修改下：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 以右表为基准，获取产品的所属情况</span>
<span class="token keyword">select</span> a.name, b.product_name from user as a right <span class="token function">join</span> product as b on a.name <span class="token operator">=</span> b.product_owner<span class="token punctuation">;</span>
</code></pre></div><p>得到的结果为：</p><table><thead><tr><th>name</th><th>product_name</th></tr></thead><tbody><tr><td>张三</td><td>苹果</td></tr><tr><td>李四</td><td>梨子</td></tr><tr><td>NULL</td><td>葡萄</td></tr></tbody></table><p>结果刚好和<code>左连接</code>相反，把右表的数据完全显示，然后左表显示与之相关的数据，没有则显示<code>NULL</code>，这里要注意的是，和它名字一样，<strong>右连接<code>right join</code>右边的为右表，而不是左</strong>，如下是与之匹配的图：</p><img src="/assets/mysql/rightjoin.gif"><div class="tip custom-block"><p class="custom-block-title">小提示</p><p><code>右连接</code>在实际场景中很少用到，别问我为什么，后端小伙伴这么和我说的 😂，而一切的<code>右连接</code>都可以转化为<code>左连接</code>。</p></div><h2 id="分组"><a href="#分组" aria-hidden="true" class="header-anchor">#</a> 分组</h2><p>使用<code>Group by</code>可以对数据进行分组，我们给<code>product</code>表再加点数据：</p><table><thead><tr><th>id</th><th>product_name</th><th>nums</th><th>owner</th></tr></thead><tbody><tr><td>1</td><td>苹果</td><td>23</td><td>张三</td></tr><tr><td>2</td><td>梨子</td><td>15</td><td>李四</td></tr><tr><td>3</td><td>葡萄</td><td>27</td><td>小八</td></tr><tr><td>4</td><td>桃子</td><td>27</td><td>小八</td></tr><tr><td>5</td><td>菠萝</td><td>27</td><td>小八</td></tr></tbody></table><p>然后我们统计下每个人所拥有的产品数：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 统计每个人所拥有的产品数</span>
<span class="token keyword">select</span> owner, count<span class="token punctuation">(</span>product_name<span class="token punctuation">)</span> as total from product group by owner<span class="token punctuation">;</span>
</code></pre></div><p>会得到以下结果：</p><table><thead><tr><th>name</th><th>total</th></tr></thead><tbody><tr><td>张三</td><td>1</td></tr><tr><td>李四</td><td>1</td></tr><tr><td>小八</td><td>3</td></tr></tbody></table><p>上面的例子就是以<code>owner</code>(所有者)来进行数据分组，使用<code>Count</code>来统计每个人所拥有的产品数，除此之外，还可以使用<code>Avg</code>、<code>Sum</code>等统计函数。</p><h2 id="索引"><a href="#索引" aria-hidden="true" class="header-anchor">#</a> 索引</h2><p>索引是一张表不可或缺的一部分，因为给一张表建立个索引，可以加快<code>sql</code>查询时的效率，这对一些大型查询来说，是必要的。</p><p>一张表可以建立一个索引，也可以建立多个索引。索引还分<strong>单列索引</strong>和<strong>组合索引</strong>，<strong>单列索引</strong>即一个索引包含一个列，一张表可以有多个单列索引，而<strong>组合索引</strong>是一个索引包含多个列</p><p>建立索引的方式：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 创建数据库时建立</span>
create table demoTable<span class="token punctuation">(</span>
  <span class="token function">id</span> INT<span class="token punctuation">(</span>10<span class="token punctuation">)</span> NOT NULL,
  username VARCHAR<span class="token punctuation">(</span>50<span class="token punctuation">)</span> NOT NULL,
  INDEX <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token punctuation">(</span>username<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment"># 如果表已经创建了，额外注入索引</span>
create index name on demoTable<span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 或者</span>
alter table demoTable add index name<span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>删除索引可以使用：</p><div class="language-bash extra-class"><pre class="language-bash"><code>drop index <span class="token punctuation">[</span>name<span class="token punctuation">]</span> on demoTable<span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">索引的缺点</p><p>虽然索引能加快我们检索的效率，但如果对表进行修改操作，比如删除、更新、插入时，这时的效率就会大大降低了。因为之前也说了，索引页是一张表，我们对实体表进行修改时，<code>mysql</code>内部也会去更新索引表。</p><p>建立索引会占用磁盘空间，所以也不宜过过多的建立索引，造成滥用。</p></div><h2 id="todo"><a href="#todo" aria-hidden="true" class="header-anchor">#</a> todo</h2><ul><li>事务</li><li>子查询</li><li>union [all / distinct]</li><li>触发器</li><li>函数</li><li>存储过程</li></ul></div><div class="page-edit"><!----><div class="last-updated"><span class="prefix">上次更新: </span><span class="time">1/23/2019, 5:00:32 PM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/services/python.html" class="prev">
          学学Python吧~
        </a></span><span class="next"><a href="/others/">
          VSCode 常用插件推荐
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/12.6f950838.js" defer></script><script src="/assets/js/app.a03d4e4f.js" defer></script>
  </body>
</html>
